services:
  - type: web
    name: carrerconnect
    env: docker
    dockerfilePath: Dockerfile
    autoDeploy: true
    publishPath: public

# Notes:
# - Using `env: docker` instructs Render to build and run the provided Dockerfile.
# - The Dockerfile already handles Composer, Node build, PHP-FPM and nginx startup.
# - Remove the previous `php artisan serve` startCommand in favor of the container CMD.
services:
  - type: web
    name: carrerconnect
    runtime: php
    buildCommand: |
      composer install --no-dev --optimize-autoloader
      npm install
      npm run build
    startCommand: php artisan serve --host 0.0.0.0 --port $PORT
    publishPath: public
